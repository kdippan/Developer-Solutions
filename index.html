<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer Solutions | Code Editor</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Lordicon -->
    <script src="https://cdn.lordicon.com/bhenfmcm.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #f43f5e;
            --dark: #1e293b;
            --light: #f8fafc;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f1f5f9;
            color: var(--dark);
        }
        
        .code-font {
            font-family: 'Fira Code', monospace;
        }
        
        .logo {
            transition: all 0.3s ease;
        }
        
        .logo:hover {
            transform: rotate(5deg) scale(1.05);
            filter: drop-shadow(0 0 10px rgba(99, 102, 241, 0.5));
        }
        
        .tab-button {
            transition: all 0.2s ease;
        }
        
        .tab-button.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            font-weight: 500;
        }
        
        .editor-container {
            transition: all 0.3s ease;
        }
        
        .run-button {
            transition: all 0.2s ease;
        }
        
        .run-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .console-message {
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .toast {
            animation: slideIn 0.3s ease, fadeOut 0.5s ease 2.5s forwards;
        }
        
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            to { opacity: 0; }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <a href="#" class="flex items-center">
                    <img src="https://iili.io/Fr4AkZu.png" alt="Developer Solutions Logo" class="logo h-10 w-auto">
                    <span class="ml-2 text-xl font-bold text-indigo-600">Developer Solutions</span>
                </a>
            </div>
            <nav class="hidden md:flex space-x-6">
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition">Home</a>
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition">Tools</a>
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition">Docs</a>
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition">Community</a>
            </nav>
            <div class="flex items-center space-x-4">
                <button class="md:hidden text-gray-700">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <button class="hidden md:flex items-center space-x-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">
                    <lord-icon
                        src="https://cdn.lordicon.com/wloilxuq.json"
                        trigger="hover"
                        colors="primary:#ffffff"
                        style="width:20px;height:20px">
                    </lord-icon>
                    <span>Login</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-6">
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
            <!-- Editor Header -->
            <div class="bg-gray-50 px-6 py-4 border-b flex justify-between items-center">
                <h2 class="text-xl font-semibold text-gray-800">Code Editor</h2>
                <div class="flex space-x-3">
                    <button id="saveBtn" class="flex items-center space-x-1 text-sm bg-indigo-100 text-indigo-700 px-3 py-1 rounded hover:bg-indigo-200 transition">
                        <i class="fas fa-save"></i>
                        <span>Save</span>
                    </button>
                    <button id="exportBtn" class="flex items-center space-x-1 text-sm bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200 transition">
                        <i class="fas fa-file-export"></i>
                        <span>Export</span>
                    </button>
                    <label for="importFile" class="flex items-center space-x-1 text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition cursor-pointer">
                        <i class="fas fa-file-import"></i>
                        <span>Import</span>
                        <input type="file" id="importFile" accept=".html,.json" class="hidden">
                    </label>
                    <button id="newBtn" class="flex items-center space-x-1 text-sm bg-gray-100 text-gray-700 px-3 py-1 rounded hover:bg-gray-200 transition">
                        <i class="fas fa-file"></i>
                        <span>New</span>
                    </button>
                </div>
            </div>
            
            <!-- Tabs -->
            <div class="flex border-b">
                <button data-tab="html" class="tab-button active px-6 py-3 text-gray-600">HTML</button>
                <button data-tab="css" class="tab-button px-6 py-3 text-gray-600">CSS</button>
                <button data-tab="js" class="tab-button px-6 py-3 text-gray-600">JavaScript</button>
                <button data-tab="result" class="tab-button px-6 py-3 text-gray-600">Result</button>
                <button data-tab="console" class="tab-button px-6 py-3 text-gray-600">Console</button>
            </div>
            
            <!-- Editor Area -->
            <div class="flex flex-col md:flex-row h-[500px]">
                <!-- Code Editors -->
                <div id="html-editor" class="editor-container flex-grow md:w-1/3 h-full border-r">
                    <div class="h-8 bg-gray-50 px-4 py-1 text-xs text-gray-500 flex items-center">
                        <i class="fab fa-html5 text-orange-500 mr-2"></i>
                        index.html
                    </div>
                    <textarea id="html-code" class="code-font w-full h-[calc(100%-2rem)] p-4 text-sm resize-none outline-none" placeholder="Write your HTML code here..."></textarea>
                </div>
                
                <div id="css-editor" class="editor-container hidden flex-grow md:w-1/3 h-full border-r">
                    <div class="h-8 bg-gray-50 px-4 py-1 text-xs text-gray-500 flex items-center">
                        <i class="fab fa-css3-alt text-blue-500 mr-2"></i>
                        style.css
                    </div>
                    <textarea id="css-code" class="code-font w-full h-[calc(100%-2rem)] p-4 text-sm resize-none outline-none" placeholder="Write your CSS code here..."></textarea>
                </div>
                
                <div id="js-editor" class="editor-container hidden flex-grow md:w-1/3 h-full border-r">
                    <div class="h-8 bg-gray-50 px-4 py-1 text-xs text-gray-500 flex items-center">
                        <i class="fab fa-js-square text-yellow-400 mr-2"></i>
                        script.js
                    </div>
                    <textarea id="js-code" class="code-font w-full h-[calc(100%-2rem)] p-4 text-sm resize-none outline-none" placeholder="Write your JavaScript code here..."></textarea>
                </div>
                
                <!-- Result Preview -->
                <div id="result-preview" class="editor-container hidden flex-grow md:w-1/3 h-full">
                    <div class="h-8 bg-gray-50 px-4 py-1 text-xs text-gray-500 flex items-center justify-between">
                        <div>
                            <i class="fas fa-eye text-indigo-500 mr-2"></i>
                            Result
                        </div>
                        <button id="runBtn" class="run-button bg-indigo-600 text-white text-xs px-3 py-1 rounded hover:bg-indigo-700">
                            <i class="fas fa-play mr-1"></i> Run
                        </button>
                    </div>
                    <iframe id="result-frame" class="w-full h-[calc(100%-2rem)] border-0 bg-white"></iframe>
                </div>
                
                <!-- Console -->
                <div id="console-output" class="editor-container hidden flex-grow md:w-1/3 h-full bg-gray-900 text-gray-200">
                    <div class="h-8 bg-gray-800 px-4 py-1 text-xs text-gray-400 flex items-center">
                        <i class="fas fa-terminal text-green-400 mr-2"></i>
                        Console
                    </div>
                    <div id="console-content" class="w-full h-[calc(100%-2rem)] p-3 overflow-y-auto text-sm font-mono">
                        <div class="console-message text-gray-400">Console output will appear here...</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t py-6">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-2 mb-4 md:mb-0">
                    <img src="https://iili.io/Fr4AkZu.png" alt="Developer Solutions Logo" class="h-8 w-auto">
                    <span class="text-lg font-semibold text-gray-700">Developer Solutions</span>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-500 hover:text-indigo-600 transition">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-500 hover:text-indigo-600 transition">
                        <i class="fab fa-twitter text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-500 hover:text-indigo-600 transition">
                        <i class="fab fa-discord text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-500 hover:text-indigo-600 transition">
                        <i class="fab fa-youtube text-xl"></i>
                    </a>
                </div>
            </div>
            <div class="mt-4 text-center md:text-left text-sm text-gray-500">
                &copy; 2023 Developer Solutions. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg hidden">
        <div class="flex items-center">
            <i class="fas fa-check-circle text-green-400 mr-2"></i>
            <span id="toast-message">Operation successful</span>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const htmlCode = document.getElementById('html-code');
            const cssCode = document.getElementById('css-code');
            const jsCode = document.getElementById('js-code');
            const resultFrame = document.getElementById('result-frame');
            const consoleContent = document.getElementById('console-content');
            const runBtn = document.getElementById('runBtn');
            const saveBtn = document.getElementById('saveBtn');
            const exportBtn = document.getElementById('exportBtn');
            const newBtn = document.getElementById('newBtn');
            const importFile = document.getElementById('importFile');
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            // Tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            const editorContainers = document.querySelectorAll('.editor-container');
            
            // Initialize with default code
            const defaultCode = {
                html: `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Project</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Welcome to Developer Solutions</h1>
    <p>Edit this code to see live changes!</p>
    <button id="demoBtn">Click Me</button>
    <script src="script.js"></script>
</body>
</html>`,
                css: `body {
    font-family: 'Poppins', sans-serif;
    background-color: #f8fafc;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    color: #1e293b;
}

h1 {
    color: #6366f1;
    margin-bottom: 1rem;
}

#demoBtn {
    background-color: #6366f1;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 0.25rem;
    cursor: pointer;
    transition: background-color 0.3s;
}

#demoBtn:hover {
    background-color: #4f46e5;
}`,
                js: `document.getElementById('demoBtn').addEventListener('click', function() {
    console.log('Button clicked!');
    alert('Hello from Developer Solutions!');
});`
            };
            
            // Load code from localStorage or set default
            function loadCode() {
                const savedCode = localStorage.getItem('devSolutionsCode');
                if (savedCode) {
                    const { html, css, js } = JSON.parse(savedCode);
                    htmlCode.value = html;
                    cssCode.value = css;
                    jsCode.value = js;
                } else {
                    htmlCode.value = defaultCode.html;
                    cssCode.value = defaultCode.css;
                    jsCode.value = defaultCode.js;
                }
                runCode();
            }
            
            // Save code to localStorage
            function saveCode() {
                const code = {
                    html: htmlCode.value,
                    css: cssCode.value,
                    js: jsCode.value
                };
                localStorage.setItem('devSolutionsCode', JSON.stringify(code));
                showToast('Code saved successfully!');
            }
            
            // Run the code and update preview
            function runCode() {
                const html = htmlCode.value;
                const css = cssCode.value;
                const js = jsCode.value;
                
                // Create a complete HTML document
                const resultDoc = `
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <style>${css}</style>
                    </head>
                    <body>
                        ${html}
                        <script>
                            // Override console methods to capture output
                            const originalConsole = {
                                log: console.log,
                                error: console.error,
                                warn: console.warn,
                                info: console.info
                            };
                            
                            function sendToConsole(method, ...args) {
                                const message = args.map(arg => {
                                    if (typeof arg === 'object') {
                                        return JSON.stringify(arg, null, 2);
                                    }
                                    return arg;
                                }).join(' ');
                                
                                window.parent.postMessage({
                                    type: 'console',
                                    method: method,
                                    message: message
                                }, '*');
                                
                                originalConsole[method].apply(console, args);
                            }
                            
                            console.log = (...args) => sendToConsole('log', ...args);
                            console.error = (...args) => sendToConsole('error', ...args);
                            console.warn = (...args) => sendToConsole('warn', ...args);
                            console.info = (...args) => sendToConsole('info', ...args);
                            
                            // Error handling
                            window.onerror = function(message, source, lineno, colno, error) {
                                window.parent.postMessage({
                                    type: 'error',
                                    message: message,
                                    line: lineno,
                                    column: colno,
                                    stack: error?.stack
                                }, '*');
                                return true;
                            };
                        </script>
                        <script>${js}</script>
                    </body>
                    </html>
                `;
                
                // Update the iframe
                resultFrame.srcdoc = resultDoc;
            }
            
            // Handle console messages from iframe
            window.addEventListener('message', function(e) {
                if (e.data.type === 'console') {
                    addConsoleMessage(e.data.method, e.data.message);
                } else if (e.data.type === 'error') {
                    addConsoleMessage('error', `${e.data.message} (Line: ${e.data.line}, Column: ${e.data.column})`);
                    if (e.data.stack) {
                        addConsoleMessage('error', e.data.stack);
                    }
                }
            });
            
            // Add message to console output
            function addConsoleMessage(method, message) {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'console-message mb-1';
                
                // Style based on method type
                let icon = '';
                let color = 'text-gray-300';
                
                switch(method) {
                    case 'log':
                        icon = '<i class="fas fa-info-circle text-blue-400 mr-2"></i>';
                        color = 'text-blue-400';
                        break;
                    case 'error':
                        icon = '<i class="fas fa-times-circle text-red-400 mr-2"></i>';
                        color = 'text-red-400';
                        break;
                    case 'warn':
                        icon = '<i class="fas fa-exclamation-triangle text-yellow-400 mr-2"></i>';
                        color = 'text-yellow-400';
                        break;
                    case 'info':
                        icon = '<i class="fas fa-info-circle text-cyan-400 mr-2"></i>';
                        color = 'text-cyan-400';
                        break;
                    default:
                        icon = '<i class="fas fa-chevron-right text-gray-400 mr-2"></i>';
                }
                
                messageDiv.innerHTML = `${icon}<span class="${color}">${message}</span>`;
                consoleContent.appendChild(messageDiv);
                consoleContent.scrollTop = consoleContent.scrollHeight;
            }
            
            // Clear console
            function clearConsole() {
                consoleContent.innerHTML = '<div class="console-message text-gray-400">Console cleared</div>';
            }
            
            // Show toast notification
            function showToast(message, isError = false) {
                toastMessage.textContent = message;
                if (isError) {
                    toast.className = 'fixed bottom-4 right-4 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center';
                    toast.innerHTML = `<i class="fas fa-exclamation-circle mr-2"></i><span>${message}</span>`;
                } else {
                    toast.className = 'fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg flex items-center';
                    toast.innerHTML = `<i class="fas fa-check-circle text-green-400 mr-2"></i><span>${message}</span>`;
                }
                
                toast.classList.remove('hidden');
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 3000);
            }
            
            // Export code as a single HTML file
            function exportCode() {
                const html = htmlCode.value;
                const css = cssCode.value;
                const js = jsCode.value;
                
                const exportDoc = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exported Project</title>
    <style>${css}</style>
</head>
<body>
    ${html}
    <script>${js}</script>
</body>
</html>`;
                
                const blob = new Blob([exportDoc], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'developer-solutions-export.html';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast('Project exported successfully!');
            }
            
            // Export code as JSON
            function exportAsJson() {
                const code = {
                    html: htmlCode.value,
                    css: cssCode.value,
                    js: jsCode.value
                };
                
                const blob = new Blob([JSON.stringify(code, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'developer-solutions-export.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast('Project exported as JSON!');
            }
            
            // Import code from file
            function importCode(file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        let html = '', css = '', js = '';
                        
                        if (file.name.endsWith('.json')) {
                            const code = JSON.parse(e.target.result);
                            html = code.html || defaultCode.html;
                            css = code.css || defaultCode.css;
                            js = code.js || defaultCode.js;
                        } else if (file.name.endsWith('.html')) {
                            const content = e.target.result;
                            // Simple parsing (this could be more robust)
                            const styleMatch = content.match(/<style>([\s\S]*?)<\/style>/);
                            const scriptMatch = content.match(/<script>([\s\S]*?)<\/script>/);
                            
                            html = content.replace(/<style>[\s\S]*?<\/style>/, '<link rel="stylesheet" href="style.css">')
                                          .replace(/<script>[\s\S]*?<\/script>/, '<script src="script.js"></script>');
                            css = styleMatch ? styleMatch[1] : defaultCode.css;
                            js = scriptMatch ? scriptMatch[1] : defaultCode.js;
                        } else {
                            throw new Error('Unsupported file format');
                        }
                        
                        htmlCode.value = html;
                        cssCode.value = css;
                        jsCode.value = js;
                        runCode();
                        showToast('File imported successfully!');
                    } catch (error) {
                        showToast('Error importing file: ' + error.message, true);
                        console.error('Import error:', error);
                    }
                };
                reader.readAsText(file);
            }
            
            // New project
            function newProject() {
                if (confirm('Are you sure you want to start a new project? All unsaved changes will be lost.')) {
                    htmlCode.value = defaultCode.html;
                    cssCode.value = defaultCode.css;
                    jsCode.value = defaultCode.js;
                    runCode();
                    clearConsole();
                    showToast('New project created');
                }
            }
            
            // Tab switching
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tab = this.getAttribute('data-tab');
                    
                    // Update active tab
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding editor/panel
                    editorContainers.forEach(container => container.classList.add('hidden'));
                    
                    if (tab === 'html') {
                        document.getElementById('html-editor').classList.remove('hidden');
                    } else if (tab === 'css') {
                        document.getElementById('css-editor').classList.remove('hidden');
                    } else if (tab === 'js') {
                        document.getElementById('js-editor').classList.remove('hidden');
                    } else if (tab === 'result') {
                        document.getElementById('result-preview').classList.remove('hidden');
                    } else if (tab === 'console') {
                        document.getElementById('console-output').classList.remove('hidden');
                    }
                });
            });
            
            // Event Listeners
            runBtn.addEventListener('click', runCode);
            saveBtn.addEventListener('click', saveCode);
            
            exportBtn.addEventListener('click', function() {
                // Simple export menu
                const menu = document.createElement('div');
                menu.className = 'absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10';
                menu.innerHTML = `
                    <a href="#" class="export-option block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Export as HTML</a>
                    <a href="#" class="export-option block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Export as JSON</a>
                `;
                
                menu.querySelectorAll('.export-option').forEach(option => {
                    option.addEventListener('click', function(e) {
                        e.preventDefault();
                        if (this.textContent.includes('HTML')) {
                            exportCode();
                        } else {
                            exportAsJson();
                        }
                        menu.remove();
                    });
                });
                
                exportBtn.parentNode.appendChild(menu);
                
                // Close menu when clicking elsewhere
                document.addEventListener('click', function closeMenu(e) {
                    if (!exportBtn.contains(e.target) {
                        menu.remove();
                        document.removeEventListener('click', closeMenu);
                    }
                });
            });
            
            newBtn.addEventListener('click', newProject);
            
            importFile.addEventListener('change', function() {
                if (this.files.length > 0) {
                    importCode(this.files[0]);
                    this.value = ''; // Reset input
                }
            });
            
            // Auto-run when code changes (with debounce)
            let debounceTimer;
            [htmlCode, cssCode, jsCode].forEach(editor => {
                editor.addEventListener('input', function() {
                    clearTimeout(debounceTimer);
                    debounceTimer = setTimeout(runCode, 1000);
                });
            });
            
            // Initialize
            loadCode();
            
            // Add keyboard shortcut for Run (Ctrl+Enter)
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    runCode();
                }
            });
        });
    </script>
</body>
</html>
