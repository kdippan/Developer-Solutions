<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Color Picker | Developer Solutions</title>
    <meta name="description" content="Comprehensive color picker tool with HEX, RGB, HSL, CMYK formats and image color extraction">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #3f37c9;
            --accent: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo {
            height: 50px;
            transition: all 0.3s ease;
        }
        
        .logo:hover {
            transform: rotate(15deg) scale(1.1);
        }
        
        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        main {
            padding: 3rem 0;
        }
        
        .tool-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .tool-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .tool-header p {
            color: var(--gray);
            max-width: 700px;
            margin: 0 auto;
        }
        
        .tool-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 768px) {
            .tool-container {
                grid-template-columns: 1fr;
            }
        }
        
        .tool-box {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            padding: 2rem;
            transition: all 0.3s ease;
        }
        
        .tool-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .color-picker-container {
            width: 100%;
            height: 300px;
            margin-bottom: 1.5rem;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
        }
        
        #color-picker {
            width: 100%;
            height: 100%;
            cursor: crosshair;
        }
        
        #color-preview {
            width: 100%;
            height: 80px;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border: 1px solid var(--gray);
        }
        
        .color-values {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 1.5rem;
        }
        
        .color-format {
            display: flex;
            flex-direction: column;
        }
        
        .color-format label {
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .color-format input {
            padding: 0.75rem;
            border: 1px solid var(--gray);
            border-radius: 4px;
            font-family: monospace;
        }
        
        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
        }
        
        .image-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
            border: 2px dashed var(--gray);
            border-radius: 8px;
            margin-bottom: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .image-upload:hover {
            border-color: var(--primary);
        }
        
        #image-preview {
            max-width: 100%;
            max-height: 300px;
            border-radius: 8px;
            display: none;
            margin-bottom: 1.5rem;
        }
        
        .color-palette {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 1.5rem;
        }
        
        .color-swatch {
            height: 50px;
            border-radius: 4px;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 5px;
            font-size: 10px;
            color: white;
            text-shadow: 0 0 2px black;
        }
        
        .color-swatch:hover {
            transform: scale(1.1);
        }
        
        footer {
            background: var(--dark);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }
        
        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 1rem;
        }
        
        .social-links a {
            color: white;
            background: rgba(255, 255, 255, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .social-links a:hover {
            background: var(--accent);
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo-container">
                <img src="https://iili.io/Fr4AkZu.png" alt="Developer Solutions Logo" class="logo">
                <span class="logo-text">Developer Solutions</span>
            </div>
            <nav>
                <a href="#" style="color: white; text-decoration: none;">
                    <i class="fas fa-arrow-left"></i> Back to Tools
                </a>
            </nav>
        </div>
    </header>
    
    <main class="container">
        <section class="tool-header">
            <h1>Advanced Color Picker</h1>
            <p>Select colors in multiple formats and extract color palettes from images</p>
        </section>
        
        <section class="tool-container">
            <div class="tool-box">
                <div class="tool-title">
                    <i class="fas fa-eye-dropper"></i>
                    <h2>Color Picker</h2>
                </div>
                
                <div class="color-picker-container">
                    <canvas id="color-picker"></canvas>
                </div>
                
                <div id="color-preview"></div>
                
                <div class="color-values">
                    <div class="color-format">
                        <label>HEX</label>
                        <input type="text" id="hex-value" readonly>
                    </div>
                    <div class="color-format">
                        <label>RGB</label>
                        <input type="text" id="rgb-value" readonly>
                    </div>
                    <div class="color-format">
                        <label>HSL</label>
                        <input type="text" id="hsl-value" readonly>
                    </div>
                    <div class="color-format">
                        <label>CMYK</label>
                        <input type="text" id="cmyk-value" readonly>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button id="copy-hex" class="btn btn-primary">
                        <i class="fas fa-copy"></i> Copy HEX
                    </button>
                    <button id="copy-rgb" class="btn btn-primary">
                        <i class="fas fa-copy"></i> Copy RGB
                    </button>
                </div>
            </div>
            
            <div class="tool-box">
                <div class="tool-title">
                    <i class="fas fa-image"></i>
                    <h2>Image Color Extractor</h2>
                </div>
                
                <div class="image-upload" id="image-upload">
                    <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; margin-bottom: 1rem; color: var(--gray);"></i>
                    <p>Drag & drop an image or click to browse</p>
                    <input type="file" id="image-input" accept="image/*" style="display: none;">
                </div>
                
                <img id="image-preview" alt="Image preview">
                
                <div class="color-palette" id="color-palette"></div>
                
                <div class="btn-group">
                    <button id="extract-colors" class="btn btn-primary" disabled>
                        <i class="fas fa-palette"></i> Extract Colors
                    </button>
                    <button id="clear-image" class="btn btn-outline">
                        <i class="fas fa-trash-alt"></i> Clear
                    </button>
                </div>
            </div>
        </section>
    </main>
    
    <footer>
        <div class="container">
            <p>Developer Solutions is open source on GitHub</p>
            <div class="social-links">
                <a href="https://github.com/kdippan/Developer-Solutions" title="GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="#" title="Twitter">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="#" title="LinkedIn">
                    <i class="fab fa-linkedin"></i>
                </a>
            </div>
            <p style="margin-top: 1rem; font-size: 0.9rem;">&copy; 2023 Developer Solutions. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Color Picker Elements
        const colorPicker = document.getElementById('color-picker');
        const colorPreview = document.getElementById('color-preview');
        const hexValue = document.getElementById('hex-value');
        const rgbValue = document.getElementById('rgb-value');
        const hslValue = document.getElementById('hsl-value');
        const cmykValue = document.getElementById('cmyk-value');
        const copyHexBtn = document.getElementById('copy-hex');
        const copyRgbBtn = document.getElementById('copy-rgb');
        
        // Image Color Extractor Elements
        const imageUpload = document.getElementById('image-upload');
        const imageInput = document.getElementById('image-input');
        const imagePreview = document.getElementById('image-preview');
        const colorPalette = document.getElementById('color-palette');
        const extractColorsBtn = document.getElementById('extract-colors');
        const clearImageBtn = document.getElementById('clear-image');
        
        // Initialize color picker canvas
        const ctx = colorPicker.getContext('2d');
        colorPicker.width = colorPicker.offsetWidth;
        colorPicker.height = colorPicker.offsetHeight;
        
        // Create color gradient
        function createColorPicker() {
            const gradient = ctx.createLinearGradient(0, 0, colorPicker.width, 0);
            
            // Create color spectrum
            gradient.addColorStop(0, 'rgb(255, 0, 0)');
            gradient.addColorStop(0.15, 'rgb(255, 0, 255)');
            gradient.addColorStop(0.33, 'rgb(0, 0, 255)');
            gradient.addColorStop(0.49, 'rgb(0, 255, 255)');
            gradient.addColorStop(0.67, 'rgb(0, 255, 0)');
            gradient.addColorStop(0.84, 'rgb(255, 255, 0)');
            gradient.addColorStop(1, 'rgb(255, 0, 0)');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, colorPicker.width, colorPicker.height);
            
            // Create brightness gradient
            const brightness = ctx.createLinearGradient(0, 0, 0, colorPicker.height);
            brightness.addColorStop(0, 'rgba(255, 255, 255, 1)');
            brightness.addColorStop(0.5, 'rgba(255, 255, 255, 0)');
            brightness.addColorStop(0.5, 'rgba(0, 0, 0, 0)');
            brightness.addColorStop(1, 'rgba(0, 0, 0, 1)');
            
            ctx.fillStyle = brightness;
            ctx.fillRect(0, 0, colorPicker.width, colorPicker.height);
        }
        
        // Convert RGB to HEX
        function rgbToHex(r, g, b) {
            return '#' + [r, g, b].map(x => {
                const hex = x.toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            }).join('');
        }
        
        // Convert RGB to HSL
        function rgbToHsl(r, g, b) {
            r /= 255, g /= 255, b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
        
            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
        
            return [
                Math.round(h * 360),
                Math.round(s * 100),
                Math.round(l * 100)
            ];
        }
        
        // Convert RGB to CMYK
        function rgbToCmyk(r, g, b) {
            let c = 1 - (r / 255);
            let m = 1 - (g / 255);
            let y = 1 - (b / 255);
            let k = Math.min(c, m, y);
            
            c = (c - k) / (1 - k) || 0;
            m = (m - k) / (1 - k) || 0;
            y = (y - k) / (1 - k) || 0;
            
            return [
                Math.round(c * 100),
                Math.round(m * 100),
                Math.round(y * 100),
                Math.round(k * 100)
            ];
        }
        
        // Handle color picker click
        function handleColorPick(e) {
            const rect = colorPicker.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            const pixel = ctx.getImageData(x, y, 1, 1).data;
            const r = pixel[0];
            const g = pixel[1];
            const b = pixel[2];
            
            // Update color preview
            colorPreview.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
            
            // Update color values
            hexValue.value = rgbToHex(r, g, b);
            rgbValue.value = `rgb(${r}, ${g}, ${b})`;
            
            const hsl = rgbToHsl(r, g, b);
            hslValue.value = `hsl(${hsl[0]}, ${hsl[1]}%, ${hsl[2]}%)`;
            
            const cmyk = rgbToCmyk(r, g, b);
            cmykValue.value = `cmyk(${cmyk[0]}%, ${cmyk[1]}%, ${cmyk[2]}%, ${cmyk[3]}%)`;
        }
        
        // Handle image upload
        function handleImageUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(event) {
                imagePreview.src = event.target.result;
                imagePreview.style.display = 'block';
                extractColorsBtn.disabled = false;
            };
            reader.readAsDataURL(file);
        }
        
        // Extract colors from image
        function extractColors() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = imagePreview.width;
            canvas.height = imagePreview.height;
            ctx.drawImage(imagePreview, 0, 0, canvas.width, canvas.height);
            
            // Get image data
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const pixels = imageData.data;
            
            // Create a simplified color map
            const colorMap = {};
            for (let i = 0; i < pixels.length; i += 4) {
                const r = pixels[i];
                const g = pixels[i + 1];
                const b = pixels[i + 2];
                const hex = rgbToHex(r, g, b);
                
                if (!colorMap[hex]) {
                    colorMap[hex] = { count: 1, r, g, b };
                } else {
                    colorMap[hex].count++;
                }
            }
            
            // Convert to array and sort by frequency
            const colors = Object.values(colorMap);
            colors.sort((a, b) => b.count - a.count);
            
            // Clear existing palette
            colorPalette.innerHTML = '';
            
            // Display top 10 colors
            const topColors = colors.slice(0, 10);
            topColors.forEach(color => {
                const swatch = document.createElement('div');
                swatch.className = 'color-swatch';
                swatch.style.backgroundColor = `rgb(${color.r}, ${color.g}, ${color.b})`;
                swatch.textContent = rgbToHex(color.r, color.g, color.b);
                swatch.addEventListener('click', () => {
                    colorPreview.style.backgroundColor = `rgb(${color.r}, ${color.g}, ${color.b})`;
                    hexValue.value = rgbToHex(color.r, color.g, color.b);
                    rgbValue.value = `rgb(${color.r}, ${color.g}, ${color.b})`;
                    
                    const hsl = rgbToHsl(color.r, color.g, color.b);
                    hslValue.value = `hsl(${hsl[0]}, ${hsl[1]}%, ${hsl[2]}%)`;
                    
                    const cmyk = rgbToCmyk(color.r, color.g, color.b);
                    cmykValue.value = `cmyk(${cmyk[0]}%, ${cmyk[1]}%, ${cmyk[2]}%, ${cmyk[3]}%)`;
                });
                colorPalette.appendChild(swatch);
            });
        }
        
        // Clear image
        function clearImage() {
            imagePreview.src = '';
            imagePreview.style.display = 'none';
            colorPalette.innerHTML = '';
            extractColorsBtn.disabled = true;
            imageInput.value = '';
        }
        
        // Copy to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text)
                .then(() => alert('Copied to clipboard: ' + text))
                .catch(err => console.error('Failed to copy: ', err));
        }
        
        // Event listeners
        colorPicker.addEventListener('click', handleColorPick);
        copyHexBtn.addEventListener('click', () => copyToClipboard(hexValue.value));
        copyRgbBtn.addEventListener('click', () => copyToClipboard(rgbValue.value));
        
        imageUpload.addEventListener('click', () => imageInput.click());
        imageInput.addEventListener('change', handleImageUpload);
        extractColorsBtn.addEventListener('click', extractColors);
        clearImageBtn.addEventListener('click', clearImage);
        
        // Drag and drop for image
        imageUpload.addEventListener('dragover', (e) => {
            e.preventDefault();
            imageUpload.style.borderColor = 'var(--primary)';
        });
        
        imageUpload.addEventListener('dragleave', () => {
            imageUpload.style.borderColor = 'var(--gray)';
        });
        
        imageUpload.addEventListener('drop', (e) => {
            e.preventDefault();
            imageUpload.style.borderColor = 'var(--gray)';
            if (e.dataTransfer.files.length) {
                imageInput.files = e.dataTransfer.files;
                handleImageUpload({ target: imageInput });
            }
        });
        
        // Initialize
        createColorPicker();
        
        // Set default color
        colorPreview.style.backgroundColor = '#4361ee';
        hexValue.value = '#4361ee';
        rgbValue.value = 'rgb(67, 97, 238)';
        hslValue.value = 'hsl(231, 84%, 60%)';
        cmykValue.value = 'cmyk(72%, 59%, 0%, 7%)';
    </script>
</body>
</html>